2025-05-29 20:31:12,609 - blueprints.features.file_utils - WARNING - python-magic not available. Try installing python-magic-bin on Windows
2025-05-29 20:31:12,626 - blueprints.core.services - INFO - BaseTask c7b79457-2593-4e71-b48b-42b5db93e78a (web_scraping) created.
2025-05-29 20:31:12,629 - blueprints.core.services - INFO - ScraperTask c7b79457-2593-4e71-b48b-42b5db93e78a initialized with 2 concurrent downloads
2025-05-29 20:31:12,630 - blueprints.core.services - INFO - Added task c7b79457-2593-4e71-b48b-42b5db93e78a to active tasks
2025-05-29 20:31:12,630 - blueprints.core.services - INFO - Removed task c7b79457-2593-4e71-b48b-42b5db93e78a from active tasks
2025-05-29 20:32:12,812 - blueprints.features.file_utils - WARNING - python-magic not available. Try installing python-magic-bin on Windows
2025-05-29 20:32:12,836 - blueprints.core.services - INFO - BaseTask a54d4463-1410-43cc-ba3c-47bf67689f9b (web_scraping) created.
2025-05-29 20:32:12,851 - blueprints.core.services - INFO - ScraperTask a54d4463-1410-43cc-ba3c-47bf67689f9b initialized with 2 concurrent downloads
2025-05-29 20:32:12,852 - blueprints.core.services - INFO - Added task a54d4463-1410-43cc-ba3c-47bf67689f9b to active tasks
2025-05-29 20:32:12,861 - blueprints.core.utils - INFO - Created output directory: /workspace/modules/downloads/test_direct
2025-05-29 20:32:12,869 - blueprints.core.services - ERROR - Error emitting progress_update for a54d4463-1410-43cc-ba3c-47bf67689f9b: Working outside of application context.

This typically means that you attempted to use functionality that needed
the current application. To solve this, set up an application context
with app.app_context(). See the documentation for more information.
2025-05-29 20:32:12,869 - blueprints.core.services - ERROR - Error emitting progress_update for a54d4463-1410-43cc-ba3c-47bf67689f9b: Working outside of application context.

This typically means that you attempted to use functionality that needed
the current application. To solve this, set up an application context
with app.app_context(). See the documentation for more information.
2025-05-29 20:32:12,876 - blueprints.core.services - INFO - Task a54d4463-1410-43cc-ba3c-47bf67689f9b (web_scraping) started processing.
2025-05-29 20:32:12,876 - blueprints.core.services - INFO - Task a54d4463-1410-43cc-ba3c-47bf67689f9b (web_scraping) thread started.
2025-05-29 20:32:12,882 - blueprints.core.services - ERROR - Error emitting task_started for a54d4463-1410-43cc-ba3c-47bf67689f9b: Working outside of application context.

This typically means that you attempted to use functionality that needed
the current application. To solve this, set up an application context
with app.app_context(). See the documentation for more information.
2025-05-29 20:32:12,883 - blueprints.core.services - INFO - Task a54d4463-1410-43cc-ba3c-47bf67689f9b: Starting enhanced scraping of 1 URLs. Output dir: /workspace/modules/downloads/test_direct
2025-05-29 20:32:12,884 - blueprints.core.services - ERROR - Error emitting progress_update for a54d4463-1410-43cc-ba3c-47bf67689f9b: Working outside of application context.

This typically means that you attempted to use functionality that needed
the current application. To solve this, set up an application context
with app.app_context(). See the documentation for more information.
2025-05-29 20:32:12,885 - blueprints.core.services - INFO - Starting URL processing with 1 workers (0 PDFs)
2025-05-29 20:32:12,885 - blueprints.core.services - ERROR - Error during enhanced scraping for task a54d4463-1410-43cc-ba3c-47bf67689f9b: name 'ThreadPoolExecutor' is not defined
Traceback (most recent call last):
  File "/workspace/modules/blueprints/core/services.py", line 3389, in _process_logic
    processed_url_results = self._execute_url_processing_phase()
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspace/modules/blueprints/core/services.py", line 3429, in _execute_url_processing_phase
    with ThreadPoolExecutor(max_workers=optimal_workers) as executor:
         ^^^^^^^^^^^^^^^^^^
NameError: name 'ThreadPoolExecutor' is not defined
2025-05-29 20:32:12,954 - blueprints.core.services - ERROR - Unhandled error in task a54d4463-1410-43cc-ba3c-47bf67689f9b (web_scraping): name 'traceback' is not defined
Traceback (most recent call last):
  File "/workspace/modules/blueprints/core/services.py", line 3389, in _process_logic
    processed_url_results = self._execute_url_processing_phase()
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspace/modules/blueprints/core/services.py", line 3429, in _execute_url_processing_phase
    with ThreadPoolExecutor(max_workers=optimal_workers) as executor:
         ^^^^^^^^^^^^^^^^^^
NameError: name 'ThreadPoolExecutor' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/workspace/modules/blueprints/core/services.py", line 680, in _run_process
    self._process_logic()  # Call the actual processing method
    ^^^^^^^^^^^^^^^^^^^^^
  File "/workspace/modules/blueprints/core/services.py", line 3413, in _process_logic
    details={"traceback": traceback.format_exc()})
                          ^^^^^^^^^
NameError: name 'traceback' is not defined. Did you forget to import 'traceback'
2025-05-29 20:32:12,982 - blueprints.core.services - INFO - Removed task a54d4463-1410-43cc-ba3c-47bf67689f9b from active tasks
2025-05-30 08:47:44,938 - academic_api - ERROR - Web scraper module not available for arXiv search
2025-05-30 08:47:44,940 - academic_api - ERROR - Web scraper module not available for Semantic Scholar search
2025-05-30 08:47:45,283 - blueprints.core.utils - WARNING - python-magic not available. Try installing python-magic-bin on Windows
2025-05-30 08:47:46,072 - blueprints.core.http_client - INFO - HTTP session created with retry strategy
2025-05-30 08:47:48,034 - file_processor - INFO - Successfully patched pytesseract to ignore temp file deletion errors
2025-05-30 08:47:48,035 - file_processor - INFO - Started temp file cleanup service
2025-05-30 08:47:49,059 - pdf_extractor - INFO - PyMuPDF (fitz) version ('1.26.0', '1.26.1', '20250522000001') detected
2025-05-30 08:47:49,197 - pdf_extractor - INFO - PyPDF2 version 3.0.1 detected
2025-05-30 08:47:49,202 - pdf_extractor - WARNING - pdfplumber not available. Install with: pip install pdfplumber
2025-05-30 08:47:49,402 - pdf_extractor - INFO - Tabula detected for table extraction
2025-05-30 08:47:49,411 - pdf_extractor - INFO - OCR available with Tesseract and PIL/Pillow
2025-05-30 08:47:49,450 - pdf_extractor - WARNING - Failed to find Java in PATH: [Errno 2] No such file or directory: 'where'
2025-05-30 08:47:49,452 - pdf_extractor - WARNING - Java installation not found. Table extraction with Tabula will not be available.
2025-05-30 08:47:49,453 - file_processor - INFO - Successfully imported pdf_extractor module
2025-05-30 08:47:49,455 - pdf_extractor - INFO - Initializing PDF extractor module...
2025-05-30 08:47:49,486 - file_processor - WARNING - Failed to initialize pdf_extractor: name 'JAVA_AVAILABLE' is not defined
2025-05-30 08:47:49,587 - pdf_output_enhancer - INFO - PDF Output Enhancer module imported. Call init_improved_output_format() to initialize.
2025-05-30 08:47:49,588 - file_processor - INFO - Successfully imported pdf_output_enhancer module
2025-05-30 08:47:49,595 - Structify - INFO - Successfully imported claude.py from Structify package
2025-05-30 08:47:49,595 - structify_import - INFO - Successfully imported claude.py module from Structify package
2025-05-30 08:47:49,597 - blueprints.core.structify_integration - INFO - Set structify TEMP_OCR_DIR to: /workspace/modules/blueprints/core/../../temp
2025-05-30 08:47:49,633 - file_processor - INFO - Tesseract language data already exists at /workspace/modules/blueprints/core/../../temp/tessdata/eng.traineddata
2025-05-30 08:47:49,633 - file_processor - INFO - OCR environment initialized with TESSDATA_PREFIX=/workspace/modules/temp/tessdata
2025-05-30 08:47:49,634 - blueprints.core.structify_integration - INFO - Initialized structify OCR environment
2025-05-30 08:47:49,634 - file_processor - INFO - Successfully patched pytesseract to use temp directory: /workspace/modules/blueprints/core/../../temp
2025-05-30 08:47:49,635 - blueprints.core.structify_integration - INFO - Patched pytesseract temp directory
2025-05-30 08:47:49,635 - blueprints.core.structify_integration - INFO - Successfully loaded structify_module and components
2025-05-30 08:47:49,662 - blueprints.core.ocr_config - WARNING - pikepdf not available. Some PDF repair functions will be limited.
2025-05-30 08:47:49,668 - blueprints.core.ocr_config - INFO - Set full permissions on temp directory: /workspace/modules/temp
2025-05-30 08:47:49,668 - blueprints.core.ocr_config - INFO - Set TESSDATA_PREFIX to: /workspace/modules/temp/tessdata
2025-05-30 08:47:49,669 - blueprints.core.ocr_config - INFO - Set temp directory environment variables to: /workspace/modules/temp
2025-05-30 08:47:49,672 - blueprints.core.ocr_config - INFO - Confirmed eng.traineddata exists at: /workspace/modules/temp/tessdata/eng.traineddata
2025-05-30 08:47:49,683 - blueprints.core.ocr_config - INFO - Confirmed eng.traineddata exists at: /workspace/modules/temp/tessdata/eng.traineddata
2025-05-30 08:47:49,689 - blueprints.core.ocr_config - INFO - Set full permissions on temp directory: /workspace/modules/temp
2025-05-30 08:47:49,695 - blueprints.core.ocr_config - INFO - Set TESSDATA_PREFIX to: /workspace/modules/temp/tessdata
2025-05-30 08:47:49,698 - blueprints.core.ocr_config - INFO - Set temp directory environment variables to: /workspace/modules/temp
2025-05-30 08:47:49,705 - blueprints.core.ocr_config - INFO - Confirmed eng.traineddata exists at: /workspace/modules/temp/tessdata/eng.traineddata
2025-05-30 08:47:49,705 - blueprints.core.ocr_config - INFO - Successfully imported pdf_extractor module
2025-05-30 08:47:49,706 - pdf_extractor - INFO - Initializing PDF extractor module...
2025-05-30 08:47:49,712 - blueprints.core.ocr_config - ERROR - Error initializing PDF extractor: name 'JAVA_AVAILABLE' is not defined
2025-05-30 08:47:49,722 - safe_ocr_handler - INFO - Set TESSDATA_PREFIX to: /workspace/modules/temp/tessdata
2025-05-30 08:47:49,729 - safe_ocr_handler - INFO - Confirmed eng.traineddata exists at: /workspace/modules/temp/tessdata/eng.traineddata
2025-05-30 08:47:49,730 - safe_ocr_handler - WARNING - Tesseract executable not found at: C:\Program Files\Tesseract-OCR\tesseract.exe
2025-05-30 08:47:49,730 - safe_ocr_handler - INFO - Successfully patched pytesseract for better temp file handling
2025-05-30 08:47:49,731 - safe_ocr_handler - INFO - Started periodic cleanup service for /workspace/modules/temp
2025-05-30 08:47:49,736 - safe_ocr_handler - INFO - Set TESSDATA_PREFIX to: /workspace/modules/temp/tessdata
2025-05-30 08:47:49,746 - safe_ocr_handler - INFO - Confirmed eng.traineddata exists at: /workspace/modules/temp/tessdata/eng.traineddata
2025-05-30 08:47:49,748 - blueprints.core.ocr_config - INFO - OCR environment set up with temp directory: /workspace/modules/temp
2025-05-30 08:47:49,752 - safe_ocr_handler - WARNING - Tesseract executable not found at: C:\Program Files\Tesseract-OCR\tesseract.exe
2025-05-30 08:47:49,753 - safe_ocr_handler - INFO - Successfully patched pytesseract for better temp file handling
2025-05-30 08:47:49,754 - safe_ocr_handler - INFO - Started periodic cleanup service for /workspace/modules/temp
2025-05-30 08:47:49,754 - blueprints.core.ocr_config - INFO - OCR handler initialized successfully
2025-05-30 08:47:49,766 - blueprints.core.ocr_config - INFO - Confirmed eng.traineddata exists at: /workspace/modules/temp/tessdata/eng.traineddata
2025-05-30 08:47:50,312 - structify_import - INFO - Successfully imported claude.py module from Structify package
2025-05-30 08:47:50,313 - web_scraper - INFO - Claude module is available for processing
2025-05-30 08:47:50,314 - web_scraper - INFO - PDF extractor module is available
2025-05-30 08:47:52,938 - blueprints.features.file_utils - WARNING - python-magic not available. Try installing python-magic-bin on Windows
