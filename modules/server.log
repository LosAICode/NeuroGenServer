2025-06-02 23:28:54,328 - app - INFO - Using static folder: /workspace/modules/static
2025-06-02 23:28:54,328 - app - INFO - Using template folder: /workspace/modules/blueprints/templates
Server initialized for eventlet.
2025-06-02 23:28:54,396 - engineio.server - INFO - Server initialized for eventlet.
2025-06-02 23:28:54,703 - blueprints.core.utils - WARNING - python-magic not available. Try installing python-magic-bin on Windows
2025-06-02 23:28:54,806 - blueprints.core.http_client - INFO - HTTP session created with retry strategy
2025-06-02 23:28:57,800 - file_processor - INFO - Successfully patched pytesseract to ignore temp file deletion errors
2025-06-02 23:28:57,800 - file_processor - INFO - Successfully patched pytesseract to ignore temp file deletion errors
2025-06-02 23:28:57,801 - file_processor - INFO - Started temp file cleanup service
2025-06-02 23:28:57,801 - file_processor - INFO - Started temp file cleanup service
üöÄ Starting NeuroGen Server (Blueprint Architecture)
==================================================
üìç Server URL: http://127.0.0.1:5025
üîß Debug mode: False
üìÅ Working directory: /workspace/modules
==================================================
2025-06-02 23:28:58,396 - INFO - PyMuPDF (fitz) version ('1.26.0', '1.26.1', '20250522000001') detected
2025-06-02 23:28:58,396 - pdf_extractor - INFO - PyMuPDF (fitz) version ('1.26.0', '1.26.1', '20250522000001') detected
2025-06-02 23:28:58,545 - INFO - PyPDF2 version 3.0.1 detected
2025-06-02 23:28:58,545 - pdf_extractor - INFO - PyPDF2 version 3.0.1 detected
2025-06-02 23:28:58,549 - WARNING - pdfplumber not available. Install with: pip install pdfplumber
2025-06-02 23:28:58,549 - pdf_extractor - WARNING - pdfplumber not available. Install with: pip install pdfplumber
2025-06-02 23:28:58,587 - INFO - Tabula detected for table extraction
2025-06-02 23:28:58,587 - pdf_extractor - INFO - Tabula detected for table extraction
2025-06-02 23:28:58,587 - INFO - OCR available with Tesseract and PIL/Pillow
2025-06-02 23:28:58,587 - pdf_extractor - INFO - OCR available with Tesseract and PIL/Pillow
2025-06-02 23:28:58,603 - WARNING - Failed to find Java in PATH: [Errno 2] No such file or directory: 'where'
2025-06-02 23:28:58,603 - pdf_extractor - WARNING - Failed to find Java in PATH: [Errno 2] No such file or directory: 'where'
2025-06-02 23:28:58,604 - WARNING - Java installation not found. Table extraction with Tabula will not be available.
2025-06-02 23:28:58,604 - pdf_extractor - WARNING - Java installation not found. Table extraction with Tabula will not be available.
2025-06-02 23:28:58,606 - file_processor - INFO - Successfully imported pdf_extractor module
2025-06-02 23:28:58,606 - file_processor - INFO - Successfully imported pdf_extractor module
2025-06-02 23:28:58,608 - INFO - Initializing PDF extractor module...
2025-06-02 23:28:58,608 - pdf_extractor - INFO - Initializing PDF extractor module...
2025-06-02 23:28:58,617 - file_processor - WARNING - Failed to initialize pdf_extractor: name 'JAVA_AVAILABLE' is not defined
2025-06-02 23:28:58,617 - file_processor - WARNING - Failed to initialize pdf_extractor: name 'JAVA_AVAILABLE' is not defined
2025-06-02 23:28:58,627 - pdf_output_enhancer - INFO - PDF Output Enhancer module imported. Call init_improved_output_format() to initialize.
2025-06-02 23:28:58,628 - file_processor - INFO - Successfully imported pdf_output_enhancer module
2025-06-02 23:28:58,628 - file_processor - INFO - Successfully imported pdf_output_enhancer module
2025-06-02 23:28:58,632 - Structify - INFO - Successfully imported claude.py from Structify package
2025-06-02 23:28:58,636 - structify_import - INFO - Successfully imported claude.py module from Structify package
2025-06-02 23:28:58,637 - blueprints.core.structify_integration - INFO - Set structify TEMP_OCR_DIR to: /workspace/modules/blueprints/core/../../temp
2025-06-02 23:28:58,689 - file_processor - INFO - Tesseract language data already exists at /workspace/modules/blueprints/core/../../temp/tessdata/eng.traineddata
2025-06-02 23:28:58,689 - file_processor - INFO - Tesseract language data already exists at /workspace/modules/blueprints/core/../../temp/tessdata/eng.traineddata
2025-06-02 23:28:58,695 - file_processor - INFO - OCR environment initialized with TESSDATA_PREFIX=/workspace/modules/temp/tessdata
2025-06-02 23:28:58,695 - file_processor - INFO - OCR environment initialized with TESSDATA_PREFIX=/workspace/modules/temp/tessdata
2025-06-02 23:28:58,696 - blueprints.core.structify_integration - INFO - Initialized structify OCR environment
2025-06-02 23:28:58,696 - file_processor - INFO - Successfully patched pytesseract to use temp directory: /workspace/modules/blueprints/core/../../temp
2025-06-02 23:28:58,696 - file_processor - INFO - Successfully patched pytesseract to use temp directory: /workspace/modules/blueprints/core/../../temp
2025-06-02 23:28:58,697 - blueprints.core.structify_integration - INFO - Patched pytesseract temp directory
2025-06-02 23:28:58,698 - blueprints.core.structify_integration - INFO - Successfully loaded structify_module and components
2025-06-02 23:28:58,717 - blueprints.core.ocr_config - WARNING - pikepdf not available. Some PDF repair functions will be limited.
2025-06-02 23:28:58,722 - blueprints.core.ocr_config - INFO - Set full permissions on temp directory: /workspace/modules/temp
2025-06-02 23:28:58,723 - blueprints.core.ocr_config - INFO - Set TESSDATA_PREFIX to: /workspace/modules/temp/tessdata
2025-06-02 23:28:58,723 - blueprints.core.ocr_config - INFO - Set temp directory environment variables to: /workspace/modules/temp
2025-06-02 23:28:58,729 - blueprints.core.ocr_config - INFO - Confirmed eng.traineddata exists at: /workspace/modules/temp/tessdata/eng.traineddata
2025-06-02 23:28:58,729 - blueprints.core.ocr_config - INFO - OCR environment initialized successfully (singleton)
2025-06-02 23:28:58,736 - blueprints.core.ocr_config - INFO - Confirmed eng.traineddata exists at: /workspace/modules/temp/tessdata/eng.traineddata
2025-06-02 23:28:58,736 - blueprints.core.ocr_config - INFO - Successfully imported pdf_extractor module
2025-06-02 23:28:58,737 - INFO - Initializing PDF extractor module...
2025-06-02 23:28:58,737 - pdf_extractor - INFO - Initializing PDF extractor module...
2025-06-02 23:28:58,744 - blueprints.core.ocr_config - ERROR - Error initializing PDF extractor: name 'JAVA_AVAILABLE' is not defined
2025-06-02 23:28:58,770 - safe_ocr_handler - INFO - Set TESSDATA_PREFIX to: /workspace/modules/temp/tessdata
2025-06-02 23:28:58,783 - safe_ocr_handler - INFO - Confirmed eng.traineddata exists at: /workspace/modules/temp/tessdata/eng.traineddata
2025-06-02 23:28:58,784 - safe_ocr_handler - WARNING - Tesseract executable not found at: C:\Program Files\Tesseract-OCR\tesseract.exe
2025-06-02 23:28:58,785 - safe_ocr_handler - INFO - Successfully patched pytesseract for better temp file handling
2025-06-02 23:28:59,570 - safe_ocr_handler - INFO - Started periodic cleanup service for /workspace/modules/temp
2025-06-02 23:28:59,576 - safe_ocr_handler - INFO - Set TESSDATA_PREFIX to: /workspace/modules/temp/tessdata
2025-06-02 23:28:59,580 - safe_ocr_handler - INFO - Confirmed eng.traineddata exists at: /workspace/modules/temp/tessdata/eng.traineddata
2025-06-02 23:28:59,580 - blueprints.core.ocr_config - INFO - OCR environment set up with temp directory: /workspace/modules/temp
2025-06-02 23:28:59,581 - safe_ocr_handler - WARNING - Tesseract executable not found at: C:\Program Files\Tesseract-OCR\tesseract.exe
2025-06-02 23:28:59,581 - safe_ocr_handler - INFO - Successfully patched pytesseract for better temp file handling
2025-06-02 23:29:00,093 - safe_ocr_handler - INFO - Started periodic cleanup service for /workspace/modules/temp
2025-06-02 23:29:00,094 - blueprints.core.ocr_config - INFO - OCR handler initialized successfully
2025-06-02 23:29:00,105 - blueprints.core.ocr_config - INFO - Confirmed eng.traineddata exists at: /workspace/modules/temp/tessdata/eng.traineddata
2025-06-02 23:29:00,485 - structify_import - INFO - Successfully imported claude.py module from Structify package
2025-06-02 23:29:00,486 - INFO - Claude module is available for processing
2025-06-02 23:29:00,486 - web_scraper - INFO - Claude module is available for processing
2025-06-02 23:29:00,487 - INFO - PDF extractor module is available
2025-06-02 23:29:00,487 - web_scraper - INFO - PDF extractor module is available
2025-06-02 23:29:03,747 - blueprints.features.file_utils - WARNING - python-magic not available. Try installing python-magic-bin on Windows
2025-06-02 23:29:03,771 - blueprints.core.services - INFO - Loaded 1 API keys
2025-06-02 23:29:03,786 - socketio_context_helper - INFO - Unified SocketIO Context Helper v4.0 loaded - Complete Blueprint alignment enabled
2025-06-02 23:29:03,787 - socketio_context_helper - INFO - Unified SocketIO context helper v4.0 initialized
2025-06-02 23:29:03,787 - blueprints.socketio_events - INFO - SocketIO Events context initialized for background threads
2025-06-02 23:29:04,011 - task_api_routes - INFO - Task history module loaded successfully
2025-06-02 23:29:04,025 - task_api_routes - INFO - Task API routes registered
2025-06-02 23:29:04,025 - app - INFO - All blueprints registered successfully
2025-06-02 23:29:04,026 - blueprints.socketio_events - INFO - SocketIO events registered successfully
2025-06-02 23:29:04,032 - app - INFO - NeuroGen Server application created successfully
2025-06-02 23:29:04,035 - app - INFO - Starting NeuroGen Server on 127.0.0.1:5025
2025-06-02 23:29:04,035 - app - INFO - Debug mode: False
2025-06-02 23:31:13,204 - blueprints.features.file_processor - INFO - Processing request: input_dir=/workspace/modules/test_input, output_file=/workspace/modules/test_output/final_stats_test.json, output_dir=None
2025-06-02 23:31:13,240 - blueprints.features.file_processor - INFO - Output file will be saved at: /workspace/modules/test_output/final_stats_test.json
2025-06-02 23:31:13,249 - blueprints.features.file_processor - INFO - Resolved output path: /workspace/modules/test_output/final_stats_test.json
2025-06-02 23:31:13,251 - blueprints.core.services - INFO - BaseTask 41a0d46e-0c0a-4071-91d0-4fe33d815bd7 (file_processing) created.
2025-06-02 23:31:13,312 - blueprints.core.services - INFO - Calibrated processing parameters: max_memory=2048MB, batch_size=25, gc_threshold=1536MB
2025-06-02 23:31:13,313 - blueprints.core.services - INFO - Added task 41a0d46e-0c0a-4071-91d0-4fe33d815bd7 to active tasks
2025-06-02 23:31:13,314 - blueprints.api.management - INFO - Registered new task 41a0d46e-0c0a-4071-91d0-4fe33d815bd7 of type file_processing
emitting event "progress_update" to all [/]
2025-06-02 23:31:13,334 - socketio.server - INFO - emitting event "progress_update" to all [/]
2025-06-02 23:31:13,341 - blueprints.core.services - INFO - Task 41a0d46e-0c0a-4071-91d0-4fe33d815bd7 (file_processing) started processing.
2025-06-02 23:31:13,341 - blueprints.socketio_events - ERROR - Error emitting task_started: Working outside of application context.

This typically means that you attempted to use functionality that needed
the current application. To solve this, set up an application context
with app.app_context(). See the documentation for more information.
2025-06-02 23:31:13,354 - blueprints.core.services - WARNING - Failed to emit task_started for 41a0d46e-0c0a-4071-91d0-4fe33d815bd7
2025-06-02 23:31:13,355 - blueprints.core.services - INFO - Task 41a0d46e-0c0a-4071-91d0-4fe33d815bd7 (file_processing) thread started.
2025-06-02 23:31:13,355 - blueprints.features.file_processor - INFO - Started processing task: 41a0d46e-0c0a-4071-91d0-4fe33d815bd7 for input directory: /workspace/modules/test_input
2025-06-02 23:31:13,372 - blueprints.core.services - INFO - Task 41a0d46e-0c0a-4071-91d0-4fe33d815bd7: Starting enhanced file processing for directory: /workspace/modules/test_input
2025-06-02 23:31:13,376 - blueprints.core.services - INFO - Task 41a0d46e-0c0a-4071-91d0-4fe33d815bd7 progress: 1% - Processing files in /workspace/modules/test_input with enhanced analytics...
2025-06-02 23:31:13,382 - blueprints.core.services - INFO - Using optimized file processor from blueprints.features.file_processor
2025-06-02 23:31:13,391 - blueprints.core.services - INFO - Starting main processing with batch_size=25, chunk_size=4096
2025-06-02 23:31:13,706 - file_processor - INFO - Successfully patched pytesseract to ignore temp file deletion errors
2025-06-02 23:31:13,706 - file_processor - INFO - Successfully patched pytesseract to ignore temp file deletion errors
2025-06-02 23:31:13,707 - file_processor - INFO - Started temp file cleanup service
2025-06-02 23:31:13,707 - file_processor - INFO - Started temp file cleanup service
2025-06-02 23:31:13,716 - file_processor - INFO - Successfully imported pdf_extractor module
2025-06-02 23:31:13,716 - file_processor - INFO - Successfully imported pdf_extractor module
2025-06-02 23:31:13,716 - INFO - Initializing PDF extractor module...
2025-06-02 23:31:13,716 - pdf_extractor - INFO - Initializing PDF extractor module...
2025-06-02 23:31:13,719 - file_processor - WARNING - Failed to initialize pdf_extractor: name 'JAVA_AVAILABLE' is not defined
2025-06-02 23:31:13,719 - file_processor - WARNING - Failed to initialize pdf_extractor: name 'JAVA_AVAILABLE' is not defined
2025-06-02 23:31:13,720 - file_processor - INFO - Successfully imported pdf_output_enhancer module
2025-06-02 23:31:13,720 - file_processor - INFO - Successfully imported pdf_output_enhancer module
2025-06-02 23:31:13,731 - file_processor - INFO - Found 1 valid files in /workspace/modules/test_input (0.01s)
2025-06-02 23:31:13,731 - file_processor - INFO - Found 1 valid files in /workspace/modules/test_input (0.01s)
2025-06-02 23:31:13,745 - blueprints.core.services - INFO - Task 41a0d46e-0c0a-4071-91d0-4fe33d815bd7 progress: 0% - Stage: discovery (0/1)
2025-06-02 23:31:13,745 - file_processor - INFO - Using thread executor with max_workers=3
2025-06-02 23:31:13,745 - file_processor - INFO - Using thread executor with max_workers=3
2025-06-02 23:31:13,747 - file_processor - INFO - Processing batch 1/1 (1 files)
2025-06-02 23:31:13,747 - file_processor - INFO - Processing batch 1/1 (1 files)
emitting event "progress_update" to all [/]
2025-06-02 23:31:13,758 - socketio.server - INFO - emitting event "progress_update" to all [/]
2025-06-02 23:31:13,758 - blueprints.core.services - INFO - Task 41a0d46e-0c0a-4071-91d0-4fe33d815bd7 progress: 100% - Stage: processing (1/1)
2025-06-02 23:31:13,763 - file_processor - INFO - Ensured output directory exists: /workspace/modules/test_output
2025-06-02 23:31:13,763 - file_processor - INFO - Ensured output directory exists: /workspace/modules/test_output
2025-06-02 23:31:13,763 - file_processor - INFO - write_optimized_json called with 1 libraries
2025-06-02 23:31:13,763 - file_processor - INFO - write_optimized_json called with 1 libraries
2025-06-02 23:31:13,764 - file_processor - INFO - Total documents across all libraries: 1
2025-06-02 23:31:13,764 - file_processor - INFO - Total documents across all libraries: 1
2025-06-02 23:31:13,764 - file_processor - INFO - Processing library 'test.txt' with 1 documents
2025-06-02 23:31:13,764 - file_processor - INFO - Processing library 'test.txt' with 1 documents
2025-06-02 23:31:13,768 - file_processor - INFO - Created training-optimized JSON with 1 documents
2025-06-02 23:31:13,768 - file_processor - INFO - Created training-optimized JSON with 1 documents
2025-06-02 23:31:13,768 - file_processor - INFO - Created optimized JSON output at /workspace/modules/test_output/final_stats_test.json
2025-06-02 23:31:13,768 - file_processor - INFO - Created optimized JSON output at /workspace/modules/test_output/final_stats_test.json
2025-06-02 23:31:13,774 - blueprints.core.services - INFO - Task 41a0d46e-0c0a-4071-91d0-4fe33d815bd7 progress: 100% - Stage: completed (100/100)
2025-06-02 23:31:13,775 - file_processor - INFO - Processing complete in 0.04s
2025-06-02 23:31:13,775 - file_processor - INFO - Processing complete in 0.04s
2025-06-02 23:31:13,775 - file_processor - INFO - Stats: 1 files found, 1 processed, 0 skipped, 0 errors, 1 chunks created
2025-06-02 23:31:13,775 - file_processor - INFO - Stats: 1 files found, 1 processed, 0 skipped, 0 errors, 1 chunks created
2025-06-02 23:31:13,783 - blueprints.core.services - INFO - Output file validation passed: /workspace/modules/test_output/final_stats_test.json (203 bytes)
2025-06-02 23:31:13,785 - blueprints.core.services - INFO - Processing completed in 0.53s: 1/100 files processed, 0 errors, 0 skipped
2025-06-02 23:31:13,785 - blueprints.api.management - INFO - Added task 41a0d46e-0c0a-4071-91d0-4fe33d815bd7 to history
2025-06-02 23:31:13,786 - blueprints.core.services - INFO - Task 41a0d46e-0c0a-4071-91d0-4fe33d815bd7 completed - BaseTask will handle emission
2025-06-02 23:31:13,786 - blueprints.core.services - INFO - Task 41a0d46e-0c0a-4071-91d0-4fe33d815bd7 enhanced final stats: processed=1, errors=0, skipped=0, pdfs=0, duration=0.53s, efficiency=18.84
2025-06-02 23:31:13,786 - blueprints.core.services - INFO - Task 41a0d46e-0c0a-4071-91d0-4fe33d815bd7 (file_processing) completed in 0.53s.
2025-06-02 23:31:13,788 - blueprints.core.services - INFO - Processing completed in 0.53s: 1/100 files processed, 0 errors, 0 skipped
emitting event "task_completed" to all [/]
2025-06-02 23:31:13,788 - socketio.server - INFO - emitting event "task_completed" to all [/]
2025-06-02 23:31:13,789 - blueprints.socketio_events - INFO - Emitted unified task_completed for 41a0d46e-0c0a-4071-91d0-4fe33d815bd7 (file_processing)
2025-06-02 23:31:13,789 - blueprints.core.services - INFO - Removed task 41a0d46e-0c0a-4071-91d0-4fe33d815bd7 from active tasks
