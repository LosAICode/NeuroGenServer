2025-05-31 13:40:57,097 - app - INFO - Using static folder: /workspace/modules/static
2025-05-31 13:40:57,104 - app - INFO - Using template folder: /workspace/modules/blueprints/templates
Server initialized for eventlet.
2025-05-31 13:40:57,182 - engineio.server - INFO - Server initialized for eventlet.
2025-05-31 13:40:57,477 - blueprints.core.utils - WARNING - python-magic not available. Try installing python-magic-bin on Windows
2025-05-31 13:40:57,556 - blueprints.core.http_client - INFO - HTTP session created with retry strategy
2025-05-31 13:41:01,729 - file_processor - INFO - Successfully patched pytesseract to ignore temp file deletion errors
2025-05-31 13:41:01,729 - file_processor - INFO - Successfully patched pytesseract to ignore temp file deletion errors
2025-05-31 13:41:01,730 - file_processor - INFO - Started temp file cleanup service
2025-05-31 13:41:01,730 - file_processor - INFO - Started temp file cleanup service
üöÄ Starting NeuroGen Server (Blueprint Architecture)
==================================================
üìç Server URL: http://127.0.0.1:5025
üîß Debug mode: False
üìÅ Working directory: /workspace/modules
==================================================
2025-05-31 13:41:03,495 - INFO - PyMuPDF (fitz) version ('1.26.0', '1.26.1', '20250522000001') detected
2025-05-31 13:41:03,495 - pdf_extractor - INFO - PyMuPDF (fitz) version ('1.26.0', '1.26.1', '20250522000001') detected
2025-05-31 13:41:03,811 - INFO - PyPDF2 version 3.0.1 detected
2025-05-31 13:41:03,811 - pdf_extractor - INFO - PyPDF2 version 3.0.1 detected
2025-05-31 13:41:03,813 - WARNING - pdfplumber not available. Install with: pip install pdfplumber
2025-05-31 13:41:03,813 - pdf_extractor - WARNING - pdfplumber not available. Install with: pip install pdfplumber
2025-05-31 13:41:03,840 - INFO - Tabula detected for table extraction
2025-05-31 13:41:03,840 - pdf_extractor - INFO - Tabula detected for table extraction
2025-05-31 13:41:03,842 - INFO - OCR available with Tesseract and PIL/Pillow
2025-05-31 13:41:03,842 - pdf_extractor - INFO - OCR available with Tesseract and PIL/Pillow
2025-05-31 13:41:03,866 - WARNING - Failed to find Java in PATH: [Errno 2] No such file or directory: 'where'
2025-05-31 13:41:03,866 - pdf_extractor - WARNING - Failed to find Java in PATH: [Errno 2] No such file or directory: 'where'
2025-05-31 13:41:03,868 - WARNING - Java installation not found. Table extraction with Tabula will not be available.
2025-05-31 13:41:03,868 - pdf_extractor - WARNING - Java installation not found. Table extraction with Tabula will not be available.
2025-05-31 13:41:03,870 - file_processor - INFO - Successfully imported pdf_extractor module
2025-05-31 13:41:03,870 - file_processor - INFO - Successfully imported pdf_extractor module
2025-05-31 13:41:03,870 - INFO - Initializing PDF extractor module...
2025-05-31 13:41:03,870 - pdf_extractor - INFO - Initializing PDF extractor module...
2025-05-31 13:41:03,874 - file_processor - WARNING - Failed to initialize pdf_extractor: name 'JAVA_AVAILABLE' is not defined
2025-05-31 13:41:03,874 - file_processor - WARNING - Failed to initialize pdf_extractor: name 'JAVA_AVAILABLE' is not defined
2025-05-31 13:41:03,899 - pdf_output_enhancer - INFO - PDF Output Enhancer module imported. Call init_improved_output_format() to initialize.
2025-05-31 13:41:03,900 - file_processor - INFO - Successfully imported pdf_output_enhancer module
2025-05-31 13:41:03,900 - file_processor - INFO - Successfully imported pdf_output_enhancer module
2025-05-31 13:41:03,906 - Structify - INFO - Successfully imported claude.py from Structify package
2025-05-31 13:41:03,907 - structify_import - INFO - Successfully imported claude.py module from Structify package
2025-05-31 13:41:03,907 - blueprints.core.structify_integration - INFO - Set structify TEMP_OCR_DIR to: /workspace/modules/blueprints/core/../../temp
2025-05-31 13:41:03,965 - file_processor - INFO - Tesseract language data already exists at /workspace/modules/blueprints/core/../../temp/tessdata/eng.traineddata
2025-05-31 13:41:03,965 - file_processor - INFO - Tesseract language data already exists at /workspace/modules/blueprints/core/../../temp/tessdata/eng.traineddata
2025-05-31 13:41:03,966 - file_processor - INFO - OCR environment initialized with TESSDATA_PREFIX=/workspace/modules/temp/tessdata
2025-05-31 13:41:03,966 - file_processor - INFO - OCR environment initialized with TESSDATA_PREFIX=/workspace/modules/temp/tessdata
2025-05-31 13:41:03,969 - blueprints.core.structify_integration - INFO - Initialized structify OCR environment
2025-05-31 13:41:03,971 - file_processor - INFO - Successfully patched pytesseract to use temp directory: /workspace/modules/blueprints/core/../../temp
2025-05-31 13:41:03,971 - file_processor - INFO - Successfully patched pytesseract to use temp directory: /workspace/modules/blueprints/core/../../temp
2025-05-31 13:41:03,974 - blueprints.core.structify_integration - INFO - Patched pytesseract temp directory
2025-05-31 13:41:03,974 - blueprints.core.structify_integration - INFO - Successfully loaded structify_module and components
2025-05-31 13:41:04,009 - blueprints.core.ocr_config - WARNING - pikepdf not available. Some PDF repair functions will be limited.
2025-05-31 13:41:04,021 - blueprints.core.ocr_config - INFO - Set full permissions on temp directory: /workspace/modules/temp
2025-05-31 13:41:04,021 - blueprints.core.ocr_config - INFO - Set TESSDATA_PREFIX to: /workspace/modules/temp/tessdata
2025-05-31 13:41:04,022 - blueprints.core.ocr_config - INFO - Set temp directory environment variables to: /workspace/modules/temp
2025-05-31 13:41:04,032 - blueprints.core.ocr_config - INFO - Confirmed eng.traineddata exists at: /workspace/modules/temp/tessdata/eng.traineddata
2025-05-31 13:41:04,043 - blueprints.core.ocr_config - INFO - Confirmed eng.traineddata exists at: /workspace/modules/temp/tessdata/eng.traineddata
2025-05-31 13:41:04,052 - blueprints.core.ocr_config - INFO - Set full permissions on temp directory: /workspace/modules/temp
2025-05-31 13:41:04,053 - blueprints.core.ocr_config - INFO - Set TESSDATA_PREFIX to: /workspace/modules/temp/tessdata
2025-05-31 13:41:04,053 - blueprints.core.ocr_config - INFO - Set temp directory environment variables to: /workspace/modules/temp
2025-05-31 13:41:04,059 - blueprints.core.ocr_config - INFO - Confirmed eng.traineddata exists at: /workspace/modules/temp/tessdata/eng.traineddata
2025-05-31 13:41:04,060 - blueprints.core.ocr_config - INFO - Successfully imported pdf_extractor module
2025-05-31 13:41:04,060 - INFO - Initializing PDF extractor module...
2025-05-31 13:41:04,060 - pdf_extractor - INFO - Initializing PDF extractor module...
2025-05-31 13:41:04,068 - blueprints.core.ocr_config - ERROR - Error initializing PDF extractor: name 'JAVA_AVAILABLE' is not defined
2025-05-31 13:41:04,083 - safe_ocr_handler - INFO - Set TESSDATA_PREFIX to: /workspace/modules/temp/tessdata
2025-05-31 13:41:04,102 - safe_ocr_handler - INFO - Confirmed eng.traineddata exists at: /workspace/modules/temp/tessdata/eng.traineddata
2025-05-31 13:41:04,104 - safe_ocr_handler - WARNING - Tesseract executable not found at: C:\Program Files\Tesseract-OCR\tesseract.exe
2025-05-31 13:41:04,104 - safe_ocr_handler - INFO - Successfully patched pytesseract for better temp file handling
2025-05-31 13:41:05,500 - safe_ocr_handler - INFO - Started periodic cleanup service for /workspace/modules/temp
2025-05-31 13:41:05,516 - safe_ocr_handler - INFO - Set TESSDATA_PREFIX to: /workspace/modules/temp/tessdata
2025-05-31 13:41:05,529 - safe_ocr_handler - INFO - Confirmed eng.traineddata exists at: /workspace/modules/temp/tessdata/eng.traineddata
2025-05-31 13:41:05,530 - blueprints.core.ocr_config - INFO - OCR environment set up with temp directory: /workspace/modules/temp
2025-05-31 13:41:05,532 - safe_ocr_handler - WARNING - Tesseract executable not found at: C:\Program Files\Tesseract-OCR\tesseract.exe
2025-05-31 13:41:05,533 - safe_ocr_handler - INFO - Successfully patched pytesseract for better temp file handling
2025-05-31 13:41:06,238 - safe_ocr_handler - INFO - Started periodic cleanup service for /workspace/modules/temp
2025-05-31 13:41:06,239 - blueprints.core.ocr_config - INFO - OCR handler initialized successfully
2025-05-31 13:41:06,242 - blueprints.core.ocr_config - INFO - Confirmed eng.traineddata exists at: /workspace/modules/temp/tessdata/eng.traineddata
2025-05-31 13:41:07,229 - structify_import - INFO - Successfully imported claude.py module from Structify package
2025-05-31 13:41:07,230 - INFO - Claude module is available for processing
2025-05-31 13:41:07,230 - web_scraper - INFO - Claude module is available for processing
2025-05-31 13:41:07,233 - INFO - PDF extractor module is available
2025-05-31 13:41:07,233 - web_scraper - INFO - PDF extractor module is available
2025-05-31 13:41:12,550 - blueprints.features.file_utils - WARNING - python-magic not available. Try installing python-magic-bin on Windows
2025-05-31 13:41:12,568 - blueprints.core.services - INFO - Loaded 1 API keys
2025-05-31 13:41:12,590 - socketio_context_helper - INFO - SocketIO context helper initialized
2025-05-31 13:41:12,722 - app - INFO - All blueprints registered successfully
2025-05-31 13:41:12,722 - blueprints.socketio_events - INFO - SocketIO events registered successfully
2025-05-31 13:41:12,726 - app - INFO - NeuroGen Server application created successfully
2025-05-31 13:41:12,730 - app - INFO - Starting NeuroGen Server on 127.0.0.1:5025
2025-05-31 13:41:12,731 - app - INFO - Debug mode: False
2025-06-01 00:54:44,023 - blueprints.features.file_processor - INFO - Processing request: input_dir=/tmp/progress_test_vie18cyy, output_file=progress_validation_test.json, output_dir=None
2025-06-01 00:54:44,218 - blueprints.features.file_processor - INFO - Output file will be saved at: /workspace/modules/downloads/progress_validation_test.json
2025-06-01 00:54:44,218 - blueprints.features.file_processor - INFO - Resolved output path: /workspace/modules/downloads/progress_validation_test.json
2025-06-01 00:54:44,249 - blueprints.core.services - INFO - BaseTask 552c64fa-c6f1-4681-8d93-fd8520861ba8 (file_processing) created.
2025-06-01 00:54:44,297 - blueprints.core.services - INFO - Calibrated processing parameters: max_memory=2048MB, batch_size=25, gc_threshold=1536MB
2025-06-01 00:54:44,298 - blueprints.core.services - INFO - Added task 552c64fa-c6f1-4681-8d93-fd8520861ba8 to active tasks
2025-06-01 00:54:44,305 - blueprints.api.management - INFO - Registered new task 552c64fa-c6f1-4681-8d93-fd8520861ba8 of type file_processing
emitting event "progress_update" to all [/]
2025-06-01 00:54:44,327 - socketio.server - INFO - emitting event "progress_update" to all [/]
2025-06-01 00:54:44,359 - blueprints.core.services - INFO - Task 552c64fa-c6f1-4681-8d93-fd8520861ba8 (file_processing) started processing.
emitting event "task_started" to all [/]
2025-06-01 00:54:44,362 - socketio.server - INFO - emitting event "task_started" to all [/]
2025-06-01 00:54:44,364 - socketio_context_helper - INFO - Emitted task_started for 552c64fa-c6f1-4681-8d93-fd8520861ba8
2025-06-01 00:54:44,367 - blueprints.core.services - INFO - Task 552c64fa-c6f1-4681-8d93-fd8520861ba8 (file_processing) thread started.
2025-06-01 00:54:44,368 - blueprints.features.file_processor - INFO - Started processing task: 552c64fa-c6f1-4681-8d93-fd8520861ba8 for input directory: /tmp/progress_test_vie18cyy
2025-06-01 00:54:44,413 - blueprints.core.services - INFO - Task 552c64fa-c6f1-4681-8d93-fd8520861ba8: Starting enhanced file processing for directory: /tmp/progress_test_vie18cyy
2025-06-01 00:54:44,415 - blueprints.core.services - INFO - Task 552c64fa-c6f1-4681-8d93-fd8520861ba8 progress: 1% - Processing files in /tmp/progress_test_vie18cyy with enhanced analytics...
2025-06-01 00:54:45,441 - file_processor - INFO - Successfully patched pytesseract to ignore temp file deletion errors
2025-06-01 00:54:45,441 - file_processor - INFO - Successfully patched pytesseract to ignore temp file deletion errors
2025-06-01 00:54:45,445 - file_processor - INFO - Started temp file cleanup service
2025-06-01 00:54:45,445 - file_processor - INFO - Started temp file cleanup service
2025-06-01 00:54:45,760 - file_processor - INFO - Successfully imported pdf_extractor module
2025-06-01 00:54:45,760 - file_processor - INFO - Successfully imported pdf_extractor module
2025-06-01 00:54:45,762 - INFO - Initializing PDF extractor module...
2025-06-01 00:54:45,762 - pdf_extractor - INFO - Initializing PDF extractor module...
2025-06-01 00:54:45,777 - file_processor - WARNING - Failed to initialize pdf_extractor: name 'JAVA_AVAILABLE' is not defined
2025-06-01 00:54:45,777 - file_processor - WARNING - Failed to initialize pdf_extractor: name 'JAVA_AVAILABLE' is not defined
2025-06-01 00:54:45,779 - file_processor - INFO - Successfully imported pdf_output_enhancer module
2025-06-01 00:54:45,779 - file_processor - INFO - Successfully imported pdf_output_enhancer module
2025-06-01 00:54:45,792 - blueprints.core.services - INFO - Using direct import of process_all_files
2025-06-01 00:54:45,795 - blueprints.core.services - INFO - Starting main processing with batch_size=25, chunk_size=4096
2025-06-01 00:54:45,811 - file_processor - INFO - Found 5 valid files in /tmp/progress_test_vie18cyy (0.01s)
2025-06-01 00:54:45,811 - file_processor - INFO - Found 5 valid files in /tmp/progress_test_vie18cyy (0.01s)
emitting event "progress_update" to all [/]
2025-06-01 00:54:45,818 - socketio.server - INFO - emitting event "progress_update" to all [/]
2025-06-01 00:54:45,819 - blueprints.core.services - INFO - Task 552c64fa-c6f1-4681-8d93-fd8520861ba8 progress: 0% - Stage: discovery (0/5)
2025-06-01 00:54:45,819 - file_processor - INFO - Using thread executor with max_workers=3
2025-06-01 00:54:45,819 - file_processor - INFO - Using thread executor with max_workers=3
2025-06-01 00:54:45,820 - file_processor - INFO - Processing batch 1/1 (5 files)
2025-06-01 00:54:45,820 - file_processor - INFO - Processing batch 1/1 (5 files)
2025-06-01 00:54:45,835 - blueprints.core.services - INFO - Task 552c64fa-c6f1-4681-8d93-fd8520861ba8 progress: 19% - Stage: processing (1/5)
2025-06-01 00:54:45,844 - blueprints.core.services - INFO - Task 552c64fa-c6f1-4681-8d93-fd8520861ba8 progress: 39% - Stage: processing (2/5)
2025-06-01 00:54:45,853 - blueprints.core.services - INFO - Task 552c64fa-c6f1-4681-8d93-fd8520861ba8 progress: 59% - Stage: processing (3/5)
2025-06-01 00:54:45,861 - blueprints.core.services - INFO - Task 552c64fa-c6f1-4681-8d93-fd8520861ba8 progress: 79% - Stage: processing (4/5)
2025-06-01 00:54:45,867 - blueprints.core.services - INFO - Task 552c64fa-c6f1-4681-8d93-fd8520861ba8 progress: 99% - Stage: processing (5/5)
2025-06-01 00:54:45,880 - file_processor - INFO - Ensured output directory exists: /workspace/modules/downloads
2025-06-01 00:54:45,880 - file_processor - INFO - Ensured output directory exists: /workspace/modules/downloads
2025-06-01 00:54:45,898 - file_processor - INFO - Created JSON output at /workspace/modules/downloads/progress_validation_test.json
2025-06-01 00:54:45,898 - file_processor - INFO - Created JSON output at /workspace/modules/downloads/progress_validation_test.json
2025-06-01 00:54:45,906 - blueprints.core.services - INFO - Task 552c64fa-c6f1-4681-8d93-fd8520861ba8 progress: 99% - Stage: completed (100/100)
2025-06-01 00:54:45,913 - file_processor - INFO - Processing complete in 0.08s
2025-06-01 00:54:45,913 - file_processor - INFO - Processing complete in 0.08s
2025-06-01 00:54:45,913 - file_processor - INFO - Stats: 5 files found, 5 processed, 0 skipped, 0 errors, 5 chunks created
2025-06-01 00:54:45,913 - file_processor - INFO - Stats: 5 files found, 5 processed, 0 skipped, 0 errors, 5 chunks created
2025-06-01 00:54:45,921 - blueprints.core.services - INFO - Output file validation passed: /workspace/modules/downloads/progress_validation_test.json (11287 bytes)
2025-06-01 00:54:45,945 - blueprints.core.services - INFO - Processing completed in 1.66s: 5/100 files processed, 0 errors, 0 skipped
emitting event "task_completed" to all [/]
2025-06-01 00:54:45,946 - socketio.server - INFO - emitting event "task_completed" to all [/]
2025-06-01 00:54:45,947 - socketio_context_helper - INFO - Emitted task_completed for 552c64fa-c6f1-4681-8d93-fd8520861ba8
2025-06-01 00:54:45,948 - blueprints.core.services - WARNING - Enhanced stats showcase not available, using standard completion
emitting event "task_completed" to all [/]
2025-06-01 00:54:45,949 - socketio.server - INFO - emitting event "task_completed" to all [/]
2025-06-01 00:54:45,950 - socketio_context_helper - INFO - Emitted task_completed for 552c64fa-c6f1-4681-8d93-fd8520861ba8
2025-06-01 00:54:45,951 - blueprints.core.services - INFO - Task 552c64fa-c6f1-4681-8d93-fd8520861ba8 enhanced final stats: processed=5, errors=0, skipped=0, pdfs=0, duration=1.69s, efficiency=29.56
2025-06-01 00:54:45,952 - blueprints.core.services - INFO - Task 552c64fa-c6f1-4681-8d93-fd8520861ba8 (file_processing) completed in 1.69s.
2025-06-01 00:54:45,956 - blueprints.core.services - INFO - Processing completed in 1.69s: 5/100 files processed, 0 errors, 0 skipped
2025-06-01 00:54:45,959 - blueprints.core.services - ERROR - Error emitting task_completed for 552c64fa-c6f1-4681-8d93-fd8520861ba8: Working outside of application context.

This typically means that you attempted to use functionality that needed
the current application. To solve this, set up an application context
with app.app_context(). See the documentation for more information.
2025-06-01 00:54:45,962 - blueprints.core.services - INFO - Removed task 552c64fa-c6f1-4681-8d93-fd8520861ba8 from active tasks
