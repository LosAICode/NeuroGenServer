# Replace in process_all_files function:
    # Setup logging with specified options
    global logger
    # Safely use setup_logging function (imported from utils)
    if 'setup_logging' in globals():
        logger = setup_logging(log_level, log_file)
    else:
        # Fallback if setup_logging not available
        logger = logging.getLogger("file_processor")
        logger.setLevel(log_level)
        # Add a handler if necessary
        if not logger.handlers:
            handler = logging.StreamHandler()
            handler.setFormatter(logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s'))
            logger.addHandler(handler)
            # Add file handler if specified
            if log_file:
                file_handler = logging.FileHandler(log_file)
                file_handler.setFormatter(logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s'))
                logger.addHandler(file_handler)
