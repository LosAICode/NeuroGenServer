2025-05-29 19:34:35,464 - app_new - INFO - Using static folder: /workspace/modules/static
2025-05-29 19:34:35,464 - app_new - INFO - Using template folder: /workspace/modules/blueprints/templates
Server initialized for eventlet.
2025-05-29 19:34:35,649 - engineio.server - INFO - Server initialized for eventlet.
2025-05-29 19:34:36,228 - blueprints.core.utils - WARNING - python-magic not available. Try installing python-magic-bin on Windows
2025-05-29 19:34:36,512 - blueprints.core.http_client - INFO - HTTP session created with retry strategy
2025-05-29 19:34:43,485 - file_processor - INFO - Successfully patched pytesseract to ignore temp file deletion errors
2025-05-29 19:34:43,485 - file_processor - INFO - Successfully patched pytesseract to ignore temp file deletion errors
2025-05-29 19:34:43,486 - file_processor - INFO - Started temp file cleanup service
2025-05-29 19:34:43,486 - file_processor - INFO - Started temp file cleanup service
üöÄ Starting NeuroGen Server (Blueprint Architecture)
==================================================
üìç Server URL: http://127.0.0.1:5025
üîß Debug mode: False
üìÅ Working directory: /workspace/modules
==================================================
2025-05-29 19:34:44,804 - INFO - PyMuPDF (fitz) version ('1.26.0', '1.26.1', '20250522000001') detected
2025-05-29 19:34:44,804 - pdf_extractor - INFO - PyMuPDF (fitz) version ('1.26.0', '1.26.1', '20250522000001') detected
2025-05-29 19:34:45,078 - INFO - PyPDF2 version 3.0.1 detected
2025-05-29 19:34:45,078 - pdf_extractor - INFO - PyPDF2 version 3.0.1 detected
2025-05-29 19:34:45,081 - WARNING - pdfplumber not available. Install with: pip install pdfplumber
2025-05-29 19:34:45,081 - pdf_extractor - WARNING - pdfplumber not available. Install with: pip install pdfplumber
2025-05-29 19:34:45,114 - INFO - Tabula detected for table extraction
2025-05-29 19:34:45,114 - pdf_extractor - INFO - Tabula detected for table extraction
2025-05-29 19:34:45,114 - INFO - OCR available with Tesseract and PIL/Pillow
2025-05-29 19:34:45,114 - pdf_extractor - INFO - OCR available with Tesseract and PIL/Pillow
2025-05-29 19:34:45,122 - WARNING - Failed to find Java in PATH: [Errno 2] No such file or directory: 'where'
2025-05-29 19:34:45,122 - pdf_extractor - WARNING - Failed to find Java in PATH: [Errno 2] No such file or directory: 'where'
2025-05-29 19:34:45,122 - WARNING - Java installation not found. Table extraction with Tabula will not be available.
2025-05-29 19:34:45,122 - pdf_extractor - WARNING - Java installation not found. Table extraction with Tabula will not be available.
2025-05-29 19:34:45,123 - file_processor - INFO - Successfully imported pdf_extractor module
2025-05-29 19:34:45,123 - file_processor - INFO - Successfully imported pdf_extractor module
2025-05-29 19:34:45,123 - INFO - Initializing PDF extractor module...
2025-05-29 19:34:45,123 - pdf_extractor - INFO - Initializing PDF extractor module...
2025-05-29 19:34:45,127 - file_processor - WARNING - Failed to initialize pdf_extractor: name 'JAVA_AVAILABLE' is not defined
2025-05-29 19:34:45,127 - file_processor - WARNING - Failed to initialize pdf_extractor: name 'JAVA_AVAILABLE' is not defined
2025-05-29 19:34:45,136 - pdf_output_enhancer - INFO - PDF Output Enhancer module imported. Call init_improved_output_format() to initialize.
2025-05-29 19:34:45,137 - file_processor - INFO - Successfully imported pdf_output_enhancer module
2025-05-29 19:34:45,137 - file_processor - INFO - Successfully imported pdf_output_enhancer module
2025-05-29 19:34:45,139 - Structify - INFO - Successfully imported claude.py from Structify package
2025-05-29 19:34:45,139 - structify_import - INFO - Successfully imported claude.py module from Structify package
2025-05-29 19:34:45,139 - blueprints.core.structify_integration - INFO - Set structify TEMP_OCR_DIR to: /workspace/modules/blueprints/core/../../temp
2025-05-29 19:34:45,299 - file_processor - INFO - Tesseract language data already exists at /workspace/modules/blueprints/core/../../temp/tessdata/eng.traineddata
2025-05-29 19:34:45,299 - file_processor - INFO - Tesseract language data already exists at /workspace/modules/blueprints/core/../../temp/tessdata/eng.traineddata
2025-05-29 19:34:45,300 - file_processor - INFO - OCR environment initialized with TESSDATA_PREFIX=/workspace/modules/temp/tessdata
2025-05-29 19:34:45,300 - file_processor - INFO - OCR environment initialized with TESSDATA_PREFIX=/workspace/modules/temp/tessdata
2025-05-29 19:34:45,300 - blueprints.core.structify_integration - INFO - Initialized structify OCR environment
2025-05-29 19:34:45,300 - file_processor - INFO - Successfully patched pytesseract to use temp directory: /workspace/modules/blueprints/core/../../temp
2025-05-29 19:34:45,300 - file_processor - INFO - Successfully patched pytesseract to use temp directory: /workspace/modules/blueprints/core/../../temp
2025-05-29 19:34:45,300 - blueprints.core.structify_integration - INFO - Patched pytesseract temp directory
2025-05-29 19:34:45,303 - blueprints.core.structify_integration - INFO - Successfully loaded structify_module and components
2025-05-29 19:34:45,666 - blueprints.core.ocr_config - WARNING - pikepdf not available. Some PDF repair functions will be limited.
2025-05-29 19:34:45,787 - blueprints.core.ocr_config - INFO - Set full permissions on temp directory: /workspace/modules/temp
2025-05-29 19:34:45,787 - blueprints.core.ocr_config - INFO - Set TESSDATA_PREFIX to: /workspace/modules/temp/tessdata
2025-05-29 19:34:45,787 - blueprints.core.ocr_config - INFO - Set temp directory environment variables to: /workspace/modules/temp
2025-05-29 19:34:45,795 - blueprints.core.ocr_config - INFO - Confirmed eng.traineddata exists at: /workspace/modules/temp/tessdata/eng.traineddata
2025-05-29 19:34:45,807 - blueprints.core.ocr_config - INFO - Confirmed eng.traineddata exists at: /workspace/modules/temp/tessdata/eng.traineddata
2025-05-29 19:34:45,832 - blueprints.core.ocr_config - INFO - Set full permissions on temp directory: /workspace/modules/temp
2025-05-29 19:34:45,832 - blueprints.core.ocr_config - INFO - Set TESSDATA_PREFIX to: /workspace/modules/temp/tessdata
2025-05-29 19:34:45,833 - blueprints.core.ocr_config - INFO - Set temp directory environment variables to: /workspace/modules/temp
2025-05-29 19:34:45,838 - blueprints.core.ocr_config - INFO - Confirmed eng.traineddata exists at: /workspace/modules/temp/tessdata/eng.traineddata
2025-05-29 19:34:45,838 - blueprints.core.ocr_config - INFO - Successfully imported pdf_extractor module
2025-05-29 19:34:45,838 - INFO - Initializing PDF extractor module...
2025-05-29 19:34:45,838 - pdf_extractor - INFO - Initializing PDF extractor module...
2025-05-29 19:34:45,840 - blueprints.core.ocr_config - ERROR - Error initializing PDF extractor: name 'JAVA_AVAILABLE' is not defined
2025-05-29 19:34:45,884 - safe_ocr_handler - INFO - Set TESSDATA_PREFIX to: /workspace/modules/temp/tessdata
2025-05-29 19:34:45,891 - safe_ocr_handler - INFO - Confirmed eng.traineddata exists at: /workspace/modules/temp/tessdata/eng.traineddata
2025-05-29 19:34:45,897 - safe_ocr_handler - WARNING - Tesseract executable not found at: C:\Program Files\Tesseract-OCR\tesseract.exe
2025-05-29 19:34:45,898 - safe_ocr_handler - INFO - Successfully patched pytesseract for better temp file handling
2025-05-29 19:34:48,170 - safe_ocr_handler - INFO - Started periodic cleanup service for /workspace/modules/temp
2025-05-29 19:34:48,177 - safe_ocr_handler - INFO - Set TESSDATA_PREFIX to: /workspace/modules/temp/tessdata
2025-05-29 19:34:48,256 - safe_ocr_handler - INFO - Confirmed eng.traineddata exists at: /workspace/modules/temp/tessdata/eng.traineddata
2025-05-29 19:34:48,256 - blueprints.core.ocr_config - INFO - OCR environment set up with temp directory: /workspace/modules/temp
2025-05-29 19:34:48,260 - safe_ocr_handler - WARNING - Tesseract executable not found at: C:\Program Files\Tesseract-OCR\tesseract.exe
2025-05-29 19:34:48,261 - safe_ocr_handler - INFO - Successfully patched pytesseract for better temp file handling
2025-05-29 19:34:50,073 - safe_ocr_handler - INFO - Started periodic cleanup service for /workspace/modules/temp
2025-05-29 19:34:50,073 - blueprints.core.ocr_config - INFO - OCR handler initialized successfully
2025-05-29 19:34:50,085 - blueprints.core.ocr_config - INFO - Confirmed eng.traineddata exists at: /workspace/modules/temp/tessdata/eng.traineddata
2025-05-29 19:34:50,845 - structify_import - INFO - Successfully imported claude.py module from Structify package
2025-05-29 19:34:50,846 - INFO - Claude module is available for processing
2025-05-29 19:34:50,846 - web_scraper - INFO - Claude module is available for processing
2025-05-29 19:34:50,847 - INFO - PDF extractor module is available
2025-05-29 19:34:50,847 - web_scraper - INFO - PDF extractor module is available
2025-05-29 19:34:54,696 - blueprints.features.file_utils - WARNING - python-magic not available. Try installing python-magic-bin on Windows
2025-05-29 19:34:54,733 - blueprints.core.services - INFO - Loaded 1 API keys
2025-05-29 19:34:54,793 - app_new - INFO - All blueprints registered successfully
2025-05-29 19:34:54,794 - blueprints.socketio_events - INFO - SocketIO events registered successfully
2025-05-29 19:34:54,795 - app_new - INFO - NeuroGen Server application created successfully
2025-05-29 19:34:54,795 - app_new - INFO - Starting NeuroGen Server on 127.0.0.1:5025
2025-05-29 19:34:54,795 - app_new - INFO - Debug mode: False
2025-05-29 19:36:38,968 - blueprints.core.utils - INFO - Created output directory: /workspace/modules/downloads/test_scraping
2025-05-29 19:36:38,970 - blueprints.features.web_scraper - INFO - Starting web scraping with 1 URLs to /workspace/modules/downloads/test_scraping
2025-05-29 19:36:38,970 - blueprints.features.web_scraper - INFO - Starting web scraping with 1 URLs to /workspace/modules/downloads/test_scraping
2025-05-29 19:36:38,970 - blueprints.features.web_scraper - INFO - Output JSON will be saved to: /workspace/modules/downloads/test_scraping/test_scrape_results.json
2025-05-29 19:36:38,970 - blueprints.features.web_scraper - INFO - Output JSON will be saved to: /workspace/modules/downloads/test_scraping/test_scrape_results.json
2025-05-29 19:36:38,970 - blueprints.features.web_scraper - INFO - PDF options: process=True, tables=True, ocr=False, structure=True, chunk_size=4096, max_downloads=5
2025-05-29 19:36:38,970 - blueprints.features.web_scraper - INFO - PDF options: process=True, tables=True, ocr=False, structure=True, chunk_size=4096, max_downloads=5
2025-05-29 19:36:38,970 - blueprints.core.services - INFO - BaseTask 05b21fff-627a-4d1f-be9c-bc7426829c9b (web_scraping) created.
2025-05-29 19:36:38,973 - blueprints.core.services - INFO - ScraperTask 05b21fff-627a-4d1f-be9c-bc7426829c9b initialized with 2 concurrent downloads
2025-05-29 19:36:38,973 - blueprints.core.services - INFO - Added task 05b21fff-627a-4d1f-be9c-bc7426829c9b to active tasks
2025-05-29 19:36:38,974 - app_new - ERROR - Exception on /api/scrape2 [POST]
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/dist-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/dist-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/dist-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/dist-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspace/modules/blueprints/features/web_scraper.py", line 134, in scrape2
    scraper_task.start(
TypeError: ScraperTask.start() got an unexpected keyword argument 'root_directory'
2025-05-29 19:36:39,012 - blueprints.core.routes - ERROR - Internal server error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
2025-05-29 19:38:50,641 - blueprints.features.web_scraper - INFO - Starting web scraping with 1 URLs to /workspace/modules/downloads/test_scraping
2025-05-29 19:38:50,641 - blueprints.features.web_scraper - INFO - Starting web scraping with 1 URLs to /workspace/modules/downloads/test_scraping
2025-05-29 19:38:50,642 - blueprints.features.web_scraper - INFO - Output JSON will be saved to: /workspace/modules/downloads/test_scraping/test_scrape_results.json
2025-05-29 19:38:50,642 - blueprints.features.web_scraper - INFO - Output JSON will be saved to: /workspace/modules/downloads/test_scraping/test_scrape_results.json
2025-05-29 19:38:50,642 - blueprints.features.web_scraper - INFO - PDF options: process=True, tables=True, ocr=False, structure=True, chunk_size=4096, max_downloads=5
2025-05-29 19:38:50,642 - blueprints.features.web_scraper - INFO - PDF options: process=True, tables=True, ocr=False, structure=True, chunk_size=4096, max_downloads=5
2025-05-29 19:38:50,642 - blueprints.core.services - INFO - BaseTask 5e646e43-2d58-4097-a0a0-d3012e6ce9b7 (web_scraping) created.
2025-05-29 19:38:50,644 - blueprints.core.services - INFO - ScraperTask 5e646e43-2d58-4097-a0a0-d3012e6ce9b7 initialized with 2 concurrent downloads
2025-05-29 19:38:50,644 - blueprints.core.services - INFO - Added task 5e646e43-2d58-4097-a0a0-d3012e6ce9b7 to active tasks
2025-05-29 19:38:50,644 - app_new - ERROR - Exception on /api/scrape2 [POST]
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/dist-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/dist-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/dist-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/dist-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspace/modules/blueprints/features/web_scraper.py", line 134, in scrape2
    # Initialize the task with parameters
TypeError: ScraperTask.start() got an unexpected keyword argument 'root_directory'
2025-05-29 19:38:50,738 - blueprints.core.routes - ERROR - Internal server error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
